@using MusicGenMVC.Models
@model IEnumerable<SongItem>
@{
    var p = (GenerationParams)ViewBag.Params;
    int page = (int)ViewBag.Page;
    int size = (int)ViewBag.PageSize;
    int total = (int)ViewBag.Total;
}
<table class="table">
    <thead>
        <tr>
            <th style="text-align:center">#</th>
            <th>Title</th>
            <th>Artist</th>
            <th>Album</th>
            <th>Genre</th>
            <th>Likes</th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var s in Model)
        {
            <tr class="row-summary">
                <td style="width:56px"><img src="@s.CoverUrl" alt="" style="width:48px;height:48px;object-fit:cover;border-radius:6px" /></td>
                <td>@s.Title</td>
                <td>@s.Artist</td>
                <td>@s.Album</td>
                <td>@s.Genre</td>
                <td>@s.Likes</td>
                <td class="text-end">
                    <button type="button" class="btn btn-sm btn-outline-secondary toggle-row" data-index="@s.Index" aria-expanded="false">
                        <span class="arrow">▼</span>
                    </button>
                </td>
            </tr>
            <tr id="detail-@s.Index" class="detail d-none"><td colspan="7"></td></tr>
        }
    </tbody>
</table>
@{
    var last = (int)Math.Ceiling(total / (double)size);
}
    <nav>
        <ul class="pagination justify-content-center">
            <li class="page-item @(page <= 1 ? "disabled" : "")">
                <a class="page-link page-nav" data-page="@(page - 1)">Previous</a>
            </li>
            @for (int i = 1; i <= last; i++)
            {
                <li class="page-item @(i == page ? "active" : "")">
                    <a class="page-link page-nav" data-page="@i">@i</a>
                </li>
            }
            <li class="page-item @(page >= last ? "disabled" : "")">
                <a class="page-link page-nav" data-page="@(page + 1)">Next</a>
            </li>
        </ul>
</nav>