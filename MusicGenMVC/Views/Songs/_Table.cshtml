@using MusicGenMVC.Models
@model IEnumerable<SongItem>
@{
    var p = (GenerationParams)ViewBag.Params;
    int page = (int)ViewBag.Page;
    int size = (int)ViewBag.PageSize;
    int total = (int)ViewBag.Total;
}
<table class="table table-hover align-middle">
    <thead>
        <tr>
            <th style="width:48px;"></th>
            <th>#</th>
            <th>Song</th>
            <th>Artist</th>
            <th>Album</th>
            <th>Genre</th>
            <th>Likes</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var s in Model)
        {
            <tr class="row-summary" data-index="@s.Index">
                <td>
                    <button type="button" class="btn btn-sm btn-outline-secondary toggle-row" data-index="@s.Index" aria-expanded="false" title="Expand/Collapse">
                        <span class="arrow">▼</span>
                    </button>
                </td>
                <td>@s.Index</td>
                <td>@s.Title</td>
                <td>@s.Artist</td>
                <td>@s.Album</td>
                <td>@s.Genre</td>
                <td>@s.Likes</td>
            </tr>
            <tr class="detail d-none" id="detail-@s.Index">
                <td colspan="7">Loading...</td>
            </tr>
        }
    </tbody>
</table>
<nav>
@{
    var last = (int)Math.Ceiling(total / (double)size);
}
    <nav>
        <ul class="pagination justify-content-center">
            <li class="page-item @(page <= 1 ? "disabled" : "")">
                <a class="page-link page-nav" data-page="@(page - 1)">Previous</a>
            </li>
            @for (int i = 1; i <= last; i++)
            {
                <li class="page-item @(i == page ? "active" : "")">
                    <a class="page-link page-nav" data-page="@i">@i</a>
                </li>
            }
            <li class="page-item @(page >= last ? "disabled" : "")">
                <a class="page-link page-nav" data-page="@(page + 1)">Next</a>
            </li>
        </ul>
</nav>